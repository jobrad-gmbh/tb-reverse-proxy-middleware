{
  "publicKeyPath": "",
  "privateKeyPath": "",
  "port": {
    "__evaluate__": "environment.PORT ?? 8080"
  },

  "forwarders": {
    "base": {
      "headerTransformations": {
        "send": [
            {
                "source": "/(GET|POST) \\/.* (.*)/",
                "target": "'$1 /services/v43/lead $2'"
            },
            {"target": "stateAPIs.salesforceSession.response.data.access_token"}
        ]
      },
      "stateAPIs": {
        "__append__": [
          {
            "data": {
              "score": 0.01
            },
            "name": "googleReCaptchaV2-3",
            "expressions": {
              "pre": "request.headers['g-recaptcha-response'] ? true : 400",
              "post": [
                "Boolean(error)",
                "response.data.success",
                "typeof response.data.score === 'number' && response.data.score >= data.score ? true : 420"
              ]
            },
            "url": "https://www.google.com/recaptcha/api/siteverify?secret=${data.secret}&response=${headers['g-recaptcha-response']}"
          },
          {
            "name": "salesforceSession",
            "options": {
              "body": {
                "grant_type": "password"
              },
              "method": "POST"
            },
            "expressions": {"pre": "true"}
          }
        ]
      }
    },
    "salesforceFreelancer": {
      "host": "jobradgmbh--leadform.sandbox.my.salesforce.com",
      "stateAPIs": {
        "__2__": {
          "url": "https://jobradgmbh--leadform.sandbox.my.salesforce.com/services/oauth2/token"
        }
      },
      "useExpression": "false"
    },
    "salesforceSales": {
      "host": "jobradgmbh--leadform.sandbox.my.salesforce.com",
      "stateAPIs": {
        "__2__": {
          "url": "https://jobradgmbh--leadform.sandbox.my.salesforce.com/services/oauth2/token"
        }
      },
      "useExpression": "true"
    }
  }
}
